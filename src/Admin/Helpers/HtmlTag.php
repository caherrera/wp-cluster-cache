<?php

namespace WpClusterCache\Admin\Helpers;

/**
 * Class HtmlTag
 *
 * @package WpClusterCache\Admin\Helpers
 * @method HtmlTag video( $content, Array $attr = [] )
 * @method HtmlTag track( $content, Array $attr = [] )
 * @method HtmlTag time( $content, Array $attr = [] )
 * @method HtmlTag tfoot( $content, Array $attr = [] )
 * @method HtmlTag tbody( $content, Array $attr = [] )
 * @method HtmlTag summary( $content, Array $attr = [] )
 * @method HtmlTag source( $content, Array $attr = [] )
 * @method HtmlTag section( $content, Array $attr = [] )
 * @method HtmlTag ruby( $content, Array $attr = [] )
 * @method HtmlTag rt( $content, Array $attr = [] )
 * @method HtmlTag rp( $content, Array $attr = [] )
 * @method HtmlTag q( $content, Array $attr = [] )
 * @method HtmlTag progress( $content, Array $attr = [] )
 * @method HtmlTag output( $content, Array $attr = [] )
 * @method HtmlTag optgroup( $content, Array $attr = [] )
 * @method HtmlTag object( $content, Array $attr = [] )
 * @method HtmlTag nav( $content, Array $attr = [] )
 * @method HtmlTag meter( $content, Array $attr = [] )
 * @method HtmlTag menuitem( $content, Array $attr = [] )
 * @method HtmlTag mark( $content, Array $attr = [] )
 * @method HtmlTag main( $content, Array $attr = [] )
 * @method HtmlTag keygen( $content, Array $attr = [] )
 * @method HtmlTag header( $content, Array $attr = [] )
 * @method HtmlTag footer( $content, Array $attr = [] )
 * @method HtmlTag figure( $content, Array $attr = [] )
 * @method HtmlTag figcaption( $content, Array $attr = [] )
 * @method HtmlTag dialog( $content, Array $attr = [] )
 * @method HtmlTag details( $content, Array $attr = [] )
 * @method HtmlTag datalist( $content, Array $attr = [] )
 * @method HtmlTag canvas( $content, Array $attr = [] )
 * @method HtmlTag bdo( $content, Array $attr = [] )
 * @method HtmlTag bdi( $content, Array $attr = [] )
 * @method HtmlTag audio( $content, Array $attr = [] )
 * @method HtmlTag aside( $content, Array $attr = [] )
 * @method HtmlTag article( $content, Array $attr = [] )
 * @method HtmlTag acronym( $content, Array $attr = [] )
 * @method HtmlTag abbr( $content, Array $attr = [] )
 * @method HtmlTag sup( $content, Array $attr = [] )
 * @method HtmlTag del( $content, Array $attr = [] )
 * @method HtmlTag textarea( $content, Array $attr = [] )
 * @method HtmlTag th( $content, Array $attr = [] )
 * @method HtmlTag title( $content, Array $attr = [] )
 * @method HtmlTag tr( $content, Array $attr = [] )
 * @method HtmlTag tt( $content, Array $attr = [] )
 * @method HtmlTag u( $content, Array $attr = [] )
 * @method HtmlTag ul( $content, Array $attr = [] )
 * @method HtmlTag var( $content, Array $attr = [] )
 * @method HtmlTag wbr( $content, Array $attr = [] )
 * @method HtmlTag xmp( $content, Array $attr = [] )
 * @method HtmlTag isindex( $content, Array $attr = [] )
 * @method HtmlTag kbd( $content, Array $attr = [] )
 * @method HtmlTag label( $content, Array $attr = [] )
 * @method HtmlTag legend( $content, Array $attr = [] )
 * @method HtmlTag li( $content, Array $attr = [] )
 * @method HtmlTag link( $content, Array $attr = [] )
 * @method HtmlTag listing( $content, Array $attr = [] )
 * @method HtmlTag map( $content, Array $attr = [] )
 * @method HtmlTag marquee( $content, Array $attr = [] )
 * @method HtmlTag menu( $content, Array $attr = [] )
 * @method HtmlTag meta( $content, Array $attr = [] )
 * @method HtmlTag multicol( $content, Array $attr = [] )
 * @method HtmlTag nobr( $content, Array $attr = [] )
 * @method HtmlTag noembed( $content, Array $attr = [] )
 * @method HtmlTag noframes( $content, Array $attr = [] )
 * @method HtmlTag noscript( $content, Array $attr = [] )
 * @method HtmlTag ol( $content, Array $attr = [] )
 * @method HtmlTag option( $content, Array $attr = [] )
 * @method HtmlTag p( $content, Array $attr = [] )
 * @method HtmlTag param( $content, Array $attr = [] )
 * @method HtmlTag plaintext( $content, Array $attr = [] )
 * @method HtmlTag pre( $content, Array $attr = [] )
 * @method HtmlTag s( $content, Array $attr = [] )
 * @method HtmlTag samp( $content, Array $attr = [] )
 * @method HtmlTag script( $content, Array $attr = [] )
 * @method HtmlTag select( $content, Array $attr = [] )
 * @method HtmlTag small( $content, Array $attr = [] )
 * @method HtmlTag sound( $content, Array $attr = [] )
 * @method HtmlTag spacer( $content, Array $attr = [] )
 * @method HtmlTag span( $content, Array $attr = [] )
 * @method HtmlTag strong( $content, Array $attr = [] )
 * @method HtmlTag style( $content, Array $attr = [] )
 * @method HtmlTag sub( $content, Array $attr = [] )
 * @method HtmlTag table( $content, Array $attr = [] )
 * @method HtmlTag thead( $content, Array $attr = [] )
 * @method HtmlTag td( $content, Array $attr = [] )
 * @method HtmlTag a( $content, Array $attr = [] )
 * @method HtmlTag address( $content, Array $attr = [] )
 * @method HtmlTag app( $content, Array $attr = [] )
 * @method HtmlTag applet( $content, Array $attr = [] )
 * @method HtmlTag area( $content, Array $attr = [] )
 * @method HtmlTag b( $content, Array $attr = [] )
 * @method HtmlTag base( $content, Array $attr = [] )
 * @method HtmlTag basefont( $content, Array $attr = [] )
 * @method HtmlTag bgsound( $content, Array $attr = [] )
 * @method HtmlTag big( $content, Array $attr = [] )
 * @method HtmlTag blink( $content, Array $attr = [] )
 * @method HtmlTag blockquote( $content, Array $attr = [] )
 * @method HtmlTag body( $content, Array $attr = [] )
 * @method HtmlTag br( $content, Array $attr = [] )
 * @method HtmlTag button( $content, Array $attr = [] )
 * @method HtmlTag caption( $content, Array $attr = [] )
 * @method HtmlTag center( $content, Array $attr = [] )
 * @method HtmlTag cite( $content, Array $attr = [] )
 * @method HtmlTag code( $content, Array $attr = [] )
 * @method HtmlTag col( $content, Array $attr = [] )
 * @method HtmlTag colgroup( $content, Array $attr = [] )
 * @method HtmlTag comment( $content, Array $attr = [] )
 * @method HtmlTag dd( $content, Array $attr = [] )
 * @method HtmlTag ins( $content, Array $attr = [] )
 * @method HtmlTag dfn( $content, Array $attr = [] )
 * @method HtmlTag dir( $content, Array $attr = [] )
 * @method HtmlTag div( $content, Array $attr = [] )
 * @method HtmlTag dl( $content, Array $attr = [] )
 * @method HtmlTag dt( $content, Array $attr = [] )
 * @method HtmlTag em( $content, Array $attr = [] )
 * @method HtmlTag embed( $content, Array $attr = [] )
 * @method HtmlTag fieldset( $content, Array $attr = [] )
 * @method HtmlTag font( $content, Array $attr = [] )
 * @method HtmlTag form( $content, Array $attr = [] )
 * @method HtmlTag frame( $content, Array $attr = [] )
 * @method HtmlTag frameset( $content, Array $attr = [] )
 * @method HtmlTag h1( $content, Array $attr = [] )
 * @method HtmlTag head( $content, Array $attr = [] )
 * @method HtmlTag hr( $content, Array $attr = [] )
 * @method HtmlTag html( $content, Array $attr = [] )
 * @method HtmlTag hype( $content, Array $attr = [] )
 * @method HtmlTag i( $content, Array $attr = [] )
 * @method HtmlTag iframe( $content, Array $attr = [] )
 */
class HtmlTag {
	protected $_html = [];

	public function __construct( $attr = [], $content = [] ) {
		if ( $content ) {

			$this->_html = (array) $content;
		}


	}

	public function add( $tag ) {
		array_push( $this->_html, $tag );
	}

	public function __call( $name, $arguments ) {
		$content = array_shift( $arguments );

		return ( new self() )->wrap( $content, $name, $arguments ? $arguments[0] : [] );
	}

	public function wrap( $content, $tag = 'div', $attr = [] ) {
		$array_to_attr = $this->arrayToAttr( $attr );
		$html          = sprintf( "<%s %s>%s</%s>", $tag, $array_to_attr, $content instanceof HtmlTag ? $content : new HtmlTag( [], $content ), $tag );

		return $html;

	}

	private function arrayToAttr( $attr = [] ) {
		$callback = function ( $key, $value ) {
			return sprintf( "%s=\"%s\"", $key, $value );
		};

		$arr = array_map( $callback, array_keys( $attr ), $attr );
		$arr = implode( " ", $arr );

		return $arr;
	}

	public function oneWrap( $tag = 'div', $attr = [] ) {
		$array_to_attr = $this->arrayToAttr( $attr );
		$html          = sprintf( "<%s %s />", $tag, $array_to_attr );

		return $html;

	}

	function __toString() {
		$string = implode( '', array_map( function ( $html ) {
			return (string) $html;
		}, (array) $this->_html ) );

		return $string;
	}
}
